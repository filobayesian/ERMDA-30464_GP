
. 
. *============================*
. * PACKAGE INSTALLATION       *
. *============================*
. local packages ftools reghdfe estout coefplot parmest

. foreach pkg of local packages {
  2.     cap which `pkg'
  3.     if _rc ssc install `pkg', replace
  4. }

. 
. *============================*
. *       LOAD DATA            *
. *============================*
. local regions molise basilicata

. local first = 1

. foreach r of local regions {
  2.     if `first' {
  3.         use "Data/derived/`r'_filtered.dta", clear
  4.         local first = 0
  5.     }
  6.     else append using "Data/derived/`r'_filtered.dta"
  7. }

. 
. *============================*
. *   TREATMENT VARIABLES      *
. *============================*
. destring region_res, replace
region_res: all characters numeric; replaced as byte

. cap drop treat_quake post_quake

. 
. gen byte treat_quake = (region_res == 12)

. gen byte post_quake  = (year >= 2003)

. 
. label var treat_quake "Molise resident"

. label var post_quake  "Post 2003"

. *============================*
. *  BASELINE TRAJECTORY PLOTS *
. *============================*
. cap mkdir "$OUT"

. label define trt 0 "Control" 1 "Molise"

. label values treat_quake trt

. 
. *--- Overall: Employment and Earnings (Δ vs 2001) ---*
. preserve

. keep year treat_quake employed wage

. drop if missing(year) | missing(treat_quake)
(0 observations deleted)

. collapse (mean) mean_emp=employed mean_earn=wage, by(treat_qua
> ke year)

. bys treat_quake: egen base_emp  = total(mean_emp  * (year==200
> 1))

. bys treat_quake: egen base_earn = total(mean_earn * (year==200
> 1))

. gen mean_emp_rel  = mean_emp  - base_emp

. gen mean_earn_rel = mean_earn - base_earn

. 
. twoway ///
>  (line mean_emp_rel year if treat_quake==0, m(o)) ///
>  (line mean_emp_rel year if treat_quake==1, m(o)), ///
>  ytitle("Employment (Δ vs 2001)") xtitle("Year") ///
>  xline(2002, lpattern(dash)) ///
>  legend(order(1 "Control" 2 "Molise")) ///
>  title("Difference-index trajectories: Employment") name(g_emp
> , replace)

. 
. twoway ///
>  (line mean_earn_rel year if treat_quake==0, m(o)) ///
>  (line mean_earn_rel year if treat_quake==1, m(o)), ///
>  ytitle("Earnings (Δ vs 2001)") xtitle("Year") ///
>  xline(2002, lpattern(dash)) ///
>  legend(order(1 "Control" 2 "Molise")) ///
>  title("Difference-index trajectories: Earnings") name(g_earn,
>  replace)

. 
. graph combine g_emp g_earn, rows(2) imargin(tiny)

. graph export "$OUT/traj_overall_emp_earn.png", replace
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/traj_overall_emp_earn.png saved as PNG format

. restore

. 
. *--- By employment type: Private/Public/Self (Δ vs 2001) ---*
. foreach k in 1 2 3 {
  2.     if `k'==1 local kname "private"
  3.     if `k'==2 local kname "public"
  4.     if `k'==3 local kname "self"
  5.     
.     preserve
  6.     keep year treat_quake wage type
  7.     drop if missing(year) | missing(treat_quake)
  8.     gen emp_`kname' = (type==`k')
  9.     gen wage_`kname' = wage if type==`k'
 10.     collapse (mean) mean_emp=emp_`kname' mean_earn=wage_`kn
> ame', by(treat_quake year)
 11.     bys treat_quake: egen base_emp  = total(mean_emp  * (ye
> ar==2001))
 12.     bys treat_quake: egen base_earn = total(mean_earn * (ye
> ar==2001))
 13.     gen mean_emp_rel  = mean_emp  - base_emp
 14.     gen mean_earn_rel = mean_earn - base_earn
 15.     local K = proper("`kname'")
 16.     
.     #delimit ;
delimiter now ;
.     twoway (line mean_emp_rel year if treat_quake==0, msymbol(
> o))
>            (line mean_emp_rel year if treat_quake==1, msymbol(
> o)),
>            ytitle("Employment (Δ vs 2001)") xtitle("Year")
>            xline(2002, lpattern(dash))
>            legend(order(1 "Control" 2 "Molise"))
>            title("Difference-index trajectories: Employment (`
> K')")
>            name("g_emp_`kname'", replace) ;
 17.     twoway (line mean_earn_rel year if treat_quake==0, msym
> bol(o))
>            (line mean_earn_rel year if treat_quake==1, msymbol
> (o)),
>            ytitle("Earnings (Δ vs 2001)") xtitle("Year")
>            xline(2002, lpattern(dash))
>            legend(order(1 "Control" 2 "Molise"))
>            title("Difference-index trajectories: Earnings (`K'
> )")
>            name("g_earn_`kname'", replace) ;
 18.     graph combine g_emp_`kname' g_earn_`kname', rows(2) ima
> rgin(tiny) ;
 19.     graph export "$OUT/traj_`kname'_emp_earn.png", replace 
> ;
 20.     #delimit cr
delimiter now cr
.     restore
 21. }
(0 observations deleted)
(59,292 missing values generated)
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/traj_private_emp_earn.png saved as PNG format
(0 observations deleted)
(126,393 missing values generated)
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/traj_public_emp_earn.png saved as PNG format
(0 observations deleted)
(128,686 missing values generated)
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/traj_self_emp_earn.png saved as PNG format

. *============================*
. *      OUTCOME VARIABLES     *
. *============================*
. // Employment indicator
. cap confirm variable employed

. if _rc gen byte employed = inlist(type, 1, 2, 3) if !missing(t
> ype)

. label var employed "Any employment (probability)"

. 
. // Employment type dummies DA FARE DATA CLEANING SU STATA
. cap drop y_private y_public y_self

. gen byte y_private = (type == 1) if !missing(type)

. gen byte y_public  = (type == 2) if !missing(type)

. gen byte y_self    = (type == 3) if !missing(type)

. 
. label var y_private "Private employment (Pr)"

. label var y_public  "Public employment (Pr)"

. label var y_self    "Self-employment (Pr)"

. 
. // Log wage
. cap drop lnwage

. gen double lnwage = ln(wage + 1)
(30,355 missing values generated)

. 
. // Relative year for event study
. cap drop rel_year

. gen rel_year = year - 2002

. label var rel_year "Year - 2002"

. 
. *============================*
. *   INCOME CATEGORIES        *
. *============================*
. // Current income category DA FARE DATA CLEANING SU STATA
. cap drop income_category

. gen byte income_category = 1 if wage < 28000 & !missing(wage)
(40,340 missing values generated)

. replace income_category = 2 if inrange(wage, 28000, 50000)
(8,110 real changes made)

. replace income_category = 3 if wage > 50000
(32,230 real changes made)

. 
. label define inc3 1 "Low" 2 "Medium" 3 "High"

. label values income_category inc3

. label var income_category "Income category (current)"

. 
. // Baseline income (last pre-quake year)
. cap drop pre baseline_wage base_inc base_inc4

. gen byte pre = (post_quake == 0)

. 
. bys id_worker: egen pre_last_year = max(year) if pre
(61,946 missing values generated)

. gen double baseline_wage = wage if year == pre_last_year
(127,976 missing values generated)

. bys id_worker: egen baseline_wage2 = max(baseline_wage)
(20,553 missing values generated)

. drop baseline_wage pre

. rename baseline_wage2 baseline_wage

. 
. gen byte base_inc = 1 if baseline_wage < 28000
(29,739 missing values generated)

. replace base_inc = 2 if inrange(baseline_wage, 28000, 50000)
(7,235 real changes made)

. replace base_inc = 3 if baseline_wage > 50000
(22,504 real changes made)

. 
. gen byte base_inc4 = cond(missing(base_inc), 4, base_inc)

. 
. label define baseinc4 1 "Low (pre)" 2 "Med (pre)" 3 "High (pre
> )" 4 "Unknown (pre)"

. label values base_inc4 baseinc4

. label var base_inc4 "Baseline income (4 cats incl. Unknown)"

. 
. // Joint outcomes: employed AND income category
. cap drop y_emp_*

. gen byte y_emp_low     = (employed == 1 & income_category == 1
> )

. gen byte y_emp_med     = (employed == 1 & income_category == 2
> )

. gen byte y_emp_high    = (employed == 1 & income_category == 3
> )

. gen byte y_emp_unknown = (employed == 1 & missing(income_categ
> ory))

. 
. label var y_emp_low     "Pr(emp ∧ low)"

. label var y_emp_med     "Pr(emp ∧ med)"

. label var y_emp_high    "Pr(emp ∧ high)"

. label var y_emp_unknown "Pr(emp ∧ unknown)"

. 
. *============================*
. *    REGRESSION ANALYSES     *
. *============================*
. local outcomes employed wage lnwage

. local absorb_spec absorb(year region_res) vce(cluster id_worke
> r)

. 
. // (A) Region-based DiD
. foreach y of local outcomes {
  2.     qui count if !missing(`y')
  3.     if r(N) > 0 {
  4.         eststo A_`y': reghdfe `y' i.post_quake##i.treat_qua
> ke, `absorb_spec'
  5.         estadd local model "A: Region DiD", replace
  6.         estadd local depvar "`y'", replace
  7.     }
  8. }
(MWFE estimator converged in 3 iterations)
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       7.72
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0055
                                                  R-squared     
>   =     0.0134
                                                  Adj R-squared 
>   =     0.0133
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.4072

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
1.post_quake |          0  (omitted)
             |
 treat_quake |
     Molise  |          0  (omitted)
             |
  post_quake#|
 treat_quake |
   1#Molise  |  -.0150253   .0054079    -2.78   0.005    -.02562
> 54                                                            
>      -.0044251
             |
       _cons |   .7885542   .0022154   355.94   0.000     .78421
> 17                                                            
>       .7928967
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "A: Region DiD"

added macro:
             e(depvar) : "employed"
(MWFE estimator converged in 3 iterations)
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )

HDFE Linear regression                            Number of obs 
>   =    111,653
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       1.01
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.3150
                                                  R-squared     
>   =     0.0184
                                                  Adj R-squared 
>   =     0.0184
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   = 11517.3214

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
        wage | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
1.post_quake |          0  (omitted)
             |
 treat_quake |
     Molise  |          0  (omitted)
             |
  post_quake#|
 treat_quake |
   1#Molise  |   -121.103   120.5301    -1.00   0.315     -357.3
> 55                                                            
>        115.149
             |
       _cons |   15494.38   89.77819   172.59   0.000      15318
> .4                                                            
>       15670.35
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "A: Region DiD"

added macro:
             e(depvar) : "wage"
(MWFE estimator converged in 3 iterations)
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )

HDFE Linear regression                            Number of obs 
>   =    111,653
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       0.50
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.4777
                                                  R-squared     
>   =     0.0163
                                                  Adj R-squared 
>   =     0.0163
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     1.0877

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
      lnwage | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
1.post_quake |          0  (omitted)
             |
 treat_quake |
     Molise  |          0  (omitted)
             |
  post_quake#|
 treat_quake |
   1#Molise  |  -.0091118   .0128344    -0.71   0.478    -.03426
> 86                                                            
>       .0160451
             |
       _cons |   9.293685   .0066856  1390.11   0.000     9.2805
> 81                                                            
>        9.30679
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "A: Region DiD"

added macro:
             e(depvar) : "lnwage"

. 
. // (B) Employment type LPM DiD
. foreach y in y_private y_public y_self {
  2.     eststo B_`y': reghdfe `y' i.treat_quake##i.post_quake, 
> `absorb_spec'
  3.     estadd local model "B: Type-specific LPM DiD", replace
  4.     estadd local depvar "`y'", replace
  5.     
.     qui margins treat_quake#post_quake
  6.     qui lincom 1.treat_quake#1.post_quake
  7. }
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =      11.75
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0006
                                                  R-squared     
>   =     0.0051
                                                  Adj R-squared 
>   =     0.0050
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.4919

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
   y_private | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0195095   .0056924    -3.43   0.001    -.03066
> 72                                                            
>      -.0083517
             |
       _cons |   .5854733   .0031215   187.56   0.000     .57935
> 49                                                            
>       .5915917
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "B: Type-specific LPM DiD"

added macro:
             e(depvar) : "y_private"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       2.95
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0860
                                                  R-squared     
>   =     0.0010
                                                  Adj R-squared 
>   =     0.0010
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.3127

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    y_public | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |    .003277   .0019088     1.72   0.086    -.00046
> 45                                                            
>       .0070184
             |
       _cons |   .1094548    .002329    47.00   0.000     .10488
> 98                                                            
>       .1140199
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "B: Type-specific LPM DiD"

added macro:
             e(depvar) : "y_public"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       0.13
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.7194
                                                  R-squared     
>   =     0.0017
                                                  Adj R-squared 
>   =     0.0016
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.2913

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
      y_self | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |   .0012072   .0033602     0.36   0.719    -.00537
> 91                                                            
>       .0077936
             |
       _cons |    .093626    .001973    47.45   0.000     .08975
> 87                                                            
>       .0974933
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "B: Type-specific LPM DiD"

added macro:
             e(depvar) : "y_self"

. 
. // (D) Baseline income heterogeneity
. eststo D_pooled: reghdfe employed i.treat_quake##i.post_quake#
> #i.base_inc4, `absorb_spec'
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   9,  16456
> )                                                             
>   =     704.41
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0000
                                                  R-squared     
>   =     0.1392
                                                  Adj R-squared 
>   =     0.1391
                                                  Within R-sq.  
>   =     0.1276
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.3804

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0117263   .0058145    -2.02   0.044    -.02312
> 34                                                            
>      -.0003292
             |
   base_inc4 |
  Med (pre)  |   .1367006   .0066581    20.53   0.000     .12364
> 99                                                            
>       .1497512
 High (pre)  |  -.3158818     .00684   -46.18   0.000     -.3292
> 89                                                            
>      -.3024746
             |
 treat_quake#|
   base_inc4 |
     Molise #|
  Med (pre)  |   -.015575   .0105239    -1.48   0.139     -.0362
> 03                                                            
>        .005053
     Molise #|
 High (pre)  |   .0077982   .0112861     0.69   0.490    -.01432
> 37                                                            
>       .0299201
             |
  post_quake#|
   base_inc4 |
1#Med (pre)  |  -.0345793   .0085718    -4.03   0.000    -.05138
> 09                                                            
>      -.0177776
          1 #|
 High (pre)  |  -.1506596   .0104179   -14.46   0.000    -.17107
> 98                                                            
>      -.1302394
             |
 treat_quake#|
  post_quake#|
   base_inc4 |
     Molise #|
          1 #|
  Med (pre)  |  -.0321678   .0148178    -2.17   0.030    -.06121
> 22                                                            
>      -.0031234
     Molise #|
          1 #|
 High (pre)  |  -.0058159   .0174564    -0.33   0.739    -.04003
> 23                                                            
>       .0284005
             |
       _cons |   .8424006   .0020852   403.99   0.000     .83831
> 33                                                            
>       .8464878
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

. estadd local model "D: Baseline income DDD", replace

added macro:
              e(model) : "D: Baseline income DDD"

. estadd local depvar "employed", replace

added macro:
             e(depvar) : "employed"

. 
. forvalues c = 1/3 {
  2.     eststo D_bin`c': reghdfe employed i.treat_quake##i.post
> _quake if base_inc == `c', `absorb_spec'
  3.     estadd local model "D: DiD within baseline bin `c'", re
> place
  4.     estadd local depvar "employed", replace
  5.     
.     qui margins treat_quake#post_quake
  6.     qui lincom 1.treat_quake#1.post_quake
  7. }
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    112,269
Absorbing 2 HDFE groups                           F(   1,  12983
> )                                                             
>   =       4.11
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0427
                                                  R-squared     
>   =     0.0547
                                                  Adj R-squared 
>   =     0.0547
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =     12,984       Root MSE      
>   =     0.3558

                         (Std. err. adjusted for 12,984 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0117914   .0058174    -2.03   0.043    -.02319
> 43                                                            
>      -.0003885
             |
       _cons |   .8424904   .0020851   404.05   0.000     .83840
> 32                                                            
>       .8465775
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "D: DiD within baseline bin 1"

added macro:
             e(depvar) : "employed"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =      7,235
Absorbing 2 HDFE groups                           F(   1,    825
> )                                                             
>   =      10.26
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0014
                                                  R-squared     
>   =     0.0318
                                                  Adj R-squared 
>   =     0.0304
                                                  Within R-sq.  
>   =     0.0025
Number of clusters (id_worker) =        826       Root MSE      
>   =     0.2136

                            (Std. err. adjusted for 826 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0437188   .0136456    -3.20   0.001     -.0705
> 03                                                            
>      -.0169347
             |
       _cons |   .9580052   .0039772   240.87   0.000     .95019
> 86                                                            
>       .9658118
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "D: DiD within baseline bin 2"

added macro:
             e(depvar) : "employed"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =     22,504
Absorbing 2 HDFE groups                           F(   1,   2646
> )                                                             
>   =       1.02
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.3122
                                                  R-squared     
>   =     0.1261
                                                  Adj R-squared 
>   =     0.1257
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =      2,647       Root MSE      
>   =     0.4662

                          (Std. err. adjusted for 2,647 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0165631    .016387    -1.01   0.312    -.04869
> 58                                                            
>       .0155696
             |
       _cons |    .464341   .0058444    79.45   0.000      .4528
> 81                                                            
>        .475801
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "D: DiD within baseline bin 3"

added macro:
             e(depvar) : "employed"

. *============================*
. *     PLOTS FOR B AND D      *
. *============================*
. 
. // B — Type-specific DiD: plot the Treat×Post effect per emplo
> yment type
. cap coefplot ///
>     (B_y_private, keep(1.treat_quake#1.post_quake) label("Priv
> ate")) ///
>     (B_y_public,  keep(1.treat_quake#1.post_quake) label("Publ
> ic")) ///
>     (B_y_self,    keep(1.treat_quake#1.post_quake) label("Self
> ")), ///
>     vertical xline(0, lp(dash)) ciopts(recast(rcap)) ///
>     coeflabels(1.treat_quake#1.post_quake = "Treat×Post") ///
>     title("B — Type-specific DiD") ytitle("Coefficient") xtitl
> e("")

. if !_rc graph export "$OUT/plot_B_types.png", replace
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/plot_B_types.png saved as PNG format

. 
. // D — Baseline-income heterogeneity: plot Treat×Post within e
> ach baseline bin
. cap coefplot ///
>     (D_bin1, keep(1.treat_quake#1.post_quake) label("Low (pre)
> ")) ///
>     (D_bin2, keep(1.treat_quake#1.post_quake) label("Med (pre)
> ")) ///
>     (D_bin3, keep(1.treat_quake#1.post_quake) label("High (pre
> )")), ///
>     vertical xline(0, lp(dash)) ciopts(recast(rcap)) ///
>     coeflabels(1.treat_quake#1.post_quake = "Treat×Post") ///
>     title("D — DiD within baseline income bins") ytitle("Coeff
> icient") xtitle("")

. if !_rc graph export "$OUT/plot_D_bins.png", replace
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/plot_D_bins.png saved as PNG format

. 
. 
. // (E) Joint outcomes DiD
. foreach y in y_emp_low y_emp_med y_emp_high y_emp_unknown {
  2.     eststo E_`y': reghdfe `y' i.treat_quake##i.post_quake, 
> `absorb_spec'
  3.     estadd local model "E: Joint outcome DiD", replace
  4.     estadd local depvar "`y'", replace
  5.     
.     qui margins treat_quake#post_quake
  6.     qui lincom 1.treat_quake#1.post_quake
  7. }
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       4.17
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0412
                                                  R-squared     
>   =     0.0099
                                                  Adj R-squared 
>   =     0.0099
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.4487

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
   y_emp_low | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0123942   .0060696    -2.04   0.041    -.02429
> 12                                                            
>      -.0004971
             |
       _cons |   .7178368   .0024879   288.53   0.000     .71296
> 02                                                            
>       .7227134
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "E: Joint outcome DiD"

added macro:
             e(depvar) : "y_emp_low"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       0.99
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.3199
                                                  R-squared     
>   =     0.0096
                                                  Adj R-squared 
>   =     0.0096
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.2309

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
   y_emp_med | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |  -.0031596   .0031767    -0.99   0.320    -.00938
> 64                                                            
>       .0030672
             |
       _cons |   .0575952   .0014405    39.98   0.000     .05477
> 17                                                            
>       .0604186
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "E: Joint outcome DiD"

added macro:
             e(depvar) : "y_emp_med"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =       0.19
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.6636
                                                  R-squared     
>   =     0.0007
                                                  Adj R-squared 
>   =     0.0006
                                                  Within R-sq.  
>   =     0.0000
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.1141

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
  y_emp_high | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |   .0005285   .0012152     0.43   0.664    -.00185
> 34                                                            
>       .0029104
             |
       _cons |   .0131222   .0007772    16.88   0.000     .01159
> 88                                                            
>       .0146457
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "E: Joint outcome DiD"

added macro:
             e(depvar) : "y_emp_high"
(MWFE estimator converged in 3 iterations)
note: 1bn.treat_quake is probably collinear with the fixed effec
> ts (all partialled-out values are close to zero; tol = 1.0e-09
> )
note: 1bn.post_quake is probably collinear with the fixed effect
> s (all partialled-out values are close to zero; tol = 1.0e-09)
warning: missing F statistic; dropped variables due to collinear
> ity or too few clusters

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   1,  16456
> )                                                             
>   =          .
Statistics robust to heteroskedasticity           Prob > F      
>   =          .
                                                  Root MSE      
>   =     0.0000
Number of clusters (id_worker) =     16,457

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
y_emp_unkn~n | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
 treat_quake |
     Molise  |          0  (omitted)
1.post_quake |          0  (omitted)
             |
 treat_quake#|
  post_quake |
   Molise#1  |          0  (omitted)
             |
       _cons |          0  (omitted)
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "E: Joint outcome DiD"

added macro:
             e(depvar) : "y_emp_unknown"

. 
. *============================*
. *   EVENT STUDY (DYNAMIC)    *
. *============================*
. // Event study program
. cap program drop _evtstore

. program define _evtstore
  1.     syntax, Filepath(string)
  2.     parmest, norestore
  3.     keep if strpos(parm, "event_") == 1
  4.     
.     gen str10 rel_str = subinstr(parm, "event_", "", 1)
  5.     replace rel_str = subinstr(rel_str, "m", "-", 1)
  6.     gen rel = real(rel_str)
  7.     
.     rename (estimate min95 max95) (beta ci_lo ci_hi)
  8.     keep rel beta ci_lo ci_hi
  9.     sort rel
 10.     
.     export delimited using "`filepath'", replace
 11. end

. 
. // Run event studies - preserve for each outcome
. cap mkdir "$OUT"

. foreach y of local outcomes {
  2.     preserve
  3.     keep if inrange(rel_year, -5, 5)
  4.     
.     // Generate event dummies (omitting -1)
.     cap drop event_*
  5.     forval k = -5/5 {
  6.         if `k' != -1 {
  7.             local suffix = cond(`k' < 0, "m" + string(abs(`
> k')), string(`k'))
  8.             gen byte event_`suffix' = (rel_year == `k' & tr
> eat_quake == 1)
  9.         }
 10.     }
 11.     
.     cap confirm variable `y'
 12.     if !_rc {
 13.         qui count if !missing(`y')
 14.         if r(N) > 0 {
 15.             eststo C_`y': reghdfe `y' event_*, `absorb_spec
> '
 16.             estadd local model "C: Dynamic DiD", replace
 17.             estadd local depvar "`y'", replace
 18.             
.             qui _evtstore, filepath("$OUT/eventstudy_`y'.csv")
 19.             
.             cap coefplot, keep(event_*) vertical xline(0, lp(d
> ash)) ///
>                 ciopts(recast(rcap)) title("Event study: `y'")
>  ///
>                 ytitle("Effect vs rel_year=-1") xtitle("Relati
> ve year")
 20.             if !_rc graph export "$OUT/eventstudy_`y'.png",
>  replace
 21.         }
 22.     }
 23.     restore
 24. }
(0 observations deleted)
(MWFE estimator converged in 3 iterations)
note: event_m5 omitted because of collinearity
note: event_5 omitted because of collinearity

HDFE Linear regression                            Number of obs 
>   =    142,008
Absorbing 2 HDFE groups                           F(   8,  16456
> )                                                             
>   =       8.45
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0000
                                                  R-squared     
>   =     0.0136
                                                  Adj R-squared 
>   =     0.0134
                                                  Within R-sq.  
>   =     0.0003
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     0.4072

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
    employed | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
    event_m5 |          0  (omitted)
    event_m4 |   .0249979   .0086087     2.90   0.004     .00812
> 39                                                            
>       .0418719
    event_m3 |   .0004359   .0083709     0.05   0.958    -.01597
> 19                                                            
>       .0168437
    event_m2 |   .0042407   .0068541     0.62   0.536    -.00919
> 41                                                            
>       .0176755
     event_0 |  -.0103107   .0068592    -1.50   0.133    -.02375
> 54                                                            
>        .003134
     event_1 |  -.0102869   .0071769    -1.43   0.152    -.02435
> 43                                                            
>       .0037806
     event_2 |  -.0057396   .0075078    -0.76   0.445    -.02045
> 57                                                            
>       .0089766
     event_3 |  -.0324416   .0079523    -4.08   0.000    -.04802
> 91                                                            
>      -.0168542
     event_4 |   .0037265   .0077531     0.48   0.631    -.01147
> 04                                                            
>       .0189234
     event_5 |          0  (omitted)
       _cons |   .7872051   .0027039   291.13   0.000     .78190
> 51                                                            
>       .7925052
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "C: Dynamic DiD"

added macro:
             e(depvar) : "employed"
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/eventstudy_employed.png saved as PNG format
(0 observations deleted)
(MWFE estimator converged in 3 iterations)
note: event_m5 omitted because of collinearity
note: event_5 omitted because of collinearity

HDFE Linear regression                            Number of obs 
>   =    111,653
Absorbing 2 HDFE groups                           F(   8,  16456
> )                                                             
>   =       5.43
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0000
                                                  R-squared     
>   =     0.0186
                                                  Adj R-squared 
>   =     0.0184
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =     16,457       Root MSE      
>   = 11516.9329

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
        wage | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
    event_m5 |          0  (omitted)
    event_m4 |  -122.8518   170.3324    -0.72   0.471    -456.72
> 17                                                            
>       211.0182
    event_m3 |  -348.6464   168.0646    -2.07   0.038    -678.07
> 12                                                            
>      -19.22157
    event_m2 |  -23.38341   140.9716    -0.17   0.868    -299.70
> 29                                                            
>       252.9361
     event_0 |  -62.15454   136.4507    -0.46   0.649    -329.61
> 28                                                            
>       205.3037
     event_1 |    160.152    146.153     1.10   0.273    -126.32
> 38                                                            
>       446.6277
     event_2 |  -65.33194   164.7223    -0.40   0.692    -388.20
> 55                                                            
>       257.5416
     event_3 |   -885.758   184.9207    -4.79   0.000    -1248.2
> 23                                                            
>      -523.2935
     event_4 |  -163.4292   191.6096    -0.85   0.394    -539.00
> 47                                                            
>       212.1464
     event_5 |          0  (omitted)
       _cons |   15531.99   94.78012   163.87   0.000     15346.
> 21                                                            
>       15717.77
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "C: Dynamic DiD"

added macro:
             e(depvar) : "wage"
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/eventstudy_wage.png saved as PNG format
(0 observations deleted)
(MWFE estimator converged in 3 iterations)
note: event_m5 omitted because of collinearity
note: event_5 omitted because of collinearity

HDFE Linear regression                            Number of obs 
>   =    111,653
Absorbing 2 HDFE groups                           F(   8,  16456
> )                                                             
>   =       1.76
Statistics robust to heteroskedasticity           Prob > F      
>   =     0.0794
                                                  R-squared     
>   =     0.0164
                                                  Adj R-squared 
>   =     0.0163
                                                  Within R-sq.  
>   =     0.0001
Number of clusters (id_worker) =     16,457       Root MSE      
>   =     1.0876

                         (Std. err. adjusted for 16,457 clusters
>  in id_worker)
----------------------------------------------------------------
> --------------
             |               Robust
      lnwage | Coefficient  std. err.      t    P>|t|     [95% c
> on                                                            
>   f. interval]
-------------+--------------------------------------------------
> --------------
    event_m5 |          0  (omitted)
    event_m4 |  -.0079207   .0284363    -0.28   0.781     -.0636
> 59                                                            
>       .0478175
    event_m3 |  -.0490638   .0254199    -1.93   0.054    -.09888
> 96                                                            
>        .000762
    event_m2 |  -.0210161   .0220494    -0.95   0.341    -.06423
> 54                                                            
>       .0222032
     event_0 |  -.0169496   .0209575    -0.81   0.419    -.05802
> 85                                                            
>       .0241294
     event_1 |   .0021026   .0209513     0.10   0.920    -.03896
> 43                                                            
>       .0431695
     event_2 |    -.05042   .0223648    -2.25   0.024    -.09425
> 75                                                            
>      -.0065826
     event_3 |  -.0464157   .0217726    -2.13   0.033    -.08909
> 25                                                            
>       -.003739
     event_4 |  -.0182946   .0223508    -0.82   0.413    -.06210
> 46                                                            
>       .0255153
     event_5 |          0  (omitted)
       _cons |   9.300331   .0082178  1131.73   0.000     9.2842
> 23                                                            
>       9.316439
----------------------------------------------------------------
> --------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
  region_res |         2           1           1     |
-----------------------------------------------------+

added macro:
              e(model) : "C: Dynamic DiD"

added macro:
             e(depvar) : "lnwage"
file
    /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_GP/outp
    > ut/eventstudy_lnwage.png saved as PNG format

. 
. *============================*
. *      EXPORT RESULTS        *
. *============================*
. local star_spec star(* 0.10 ** 0.05 *** 0.01)

. local table_opts replace se r2 ar2 label nonotes b(%9.4f) se(%
> 9.4f) `star_spec'

. 
. // Block-specific tables
. esttab D_pooled D_bin1 D_bin2 D_bin3 using "$OUT/results_D_bas
> eline_income.txt", ///
>     `table_opts' title("D — Baseline income heterogeneity")
(output written to output/results_D_baseline_income.txt)

. 
. esttab E_y_emp_* using "$OUT/results_E_joint_outcomes.txt", //
> /
>     `table_opts' title("E — Joint outcomes: Pr(emp & income bi
> n)")
(output written to output/results_E_joint_outcomes.txt)

. 
. // Master table
. esttab A_* B_* C_* D_* E_* using "$OUT/results_ALL.txt", ///
>     `table_opts' nogap nogaps ///
>     title("A/B/C/D/E — Region DiD, Type LPM, Dynamic, Baseline
>  Income, Joint Outcomes")
(output written to output/results_ALL.txt)

. 
. log close _all
      name:  <unnamed>
       log:  /Users/vittoriogaravelli/GitHub/GitHub/ERMDA-30464_
> GP/output/empirical_00_04.log
  log type:  text
 closed on:  19 Nov 2025, 23:42:13
----------------------------------------------------------------
